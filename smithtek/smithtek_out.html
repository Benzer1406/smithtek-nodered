<script type="text/x-red" data-template-name="smithtek_out">
    <div class="form-row">
        <label for="node-input-token static-label">
            <i class="icon-lock"></i>
            <span data-i18n="smithtek.token.label"></span>
        </label>
        <input type="text" id="node-input-token" data-i18n="[placeholder]smithtek.token.placeholder" />
    </div>

    <div class="form-row">
        <label for="node-input-device_label static-label">
            <i class="icon-tag"></i>
            <span data-i18n="smithtek.device_label.label"></span>
        </label>
        <input type="text" id="node-input-device_label" data-i18n="[placeholder]smithtek.device_label.placeholder" />
    </div>
</script>

<script type="text/x-red" data-help-name="smithtek_out">
    <p>Receives a message and uses its values to make a request to the SmithTek API.</p>

    <p>
    Uses the <a href="https://github.com/mqttjs/MQTT.js" target="_blank">MQTT</a> to make the connection and publish
    the packet.
    </p>

    <p>
    The message can contain the following properties, all of them except the <i>payload</i> can also be configured in
    the node settings by double clicking it:<br />

    <ul>
        <li>
            <b>msg.token</b> (required) - The token of your account.
        </li>
        <li>
            <b>msg.device_label</b> (optional) - The name of the Device in which the packet will be published. If
            no Device exists with this label, it will be automatically created.
        </li>
        <li>
            <b>msg.payload</b> (optional) - The values to be published on the given Device. Each key is the label of the
            variable.
        </li>
    </ul>
    </p>
</script>

<script type="text/javascript">
    RED.nodes.registerType('smithtek_out', {
        category: 'output',
        color : "#B9B6B8",
        defaults : {
            token : {value: ""},
            label_device: {value: ""},
            device_label: {value: ""}
        },
        inputs : 1,
        outputs : 0,
        icon : "smithtek.png",
        label : function() {
            return this.name || this.to || "smithtek out";
        },
        labelStyle : function() {
            return this.name ? "node_label_italic" : "";
        }
    });
</script>

<style>
.static-label {
    width: 25%;
}
</style>
